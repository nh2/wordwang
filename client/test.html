<html>
  <head>
    <meta charset="utf-8" />
    <title>Mocha Tests</title>

    <link rel="stylesheet" href="css/lib/mocha.css" />

    <script src="js/lib/CoffeeScript.js"></script>
    <script src="js/lib/jquery.js"></script>

    <script src='js/lib/jsschema.js'></script>

    <script src="js/lib/chai.js"></script>
    <script src="js/lib/mocha.js"></script>

    <script type="text/coffeescript">

      mocha.setup('bdd')

      files = [
        'test/schemas.coffee'
        'test/protocol.coffee'
      ]

      filesToLoadRemaining = files.length

      # Load files
      for url in files
        CoffeeScript.load url, ->
          filesToLoadRemaining--

          # Once all files are loaded, run mocha
          if filesToLoadRemaining == 0
            $(document).ready -> mocha.run()

    </script>

  </head>
  <body>
    <div id="mocha"></div>
  </body>
</html>
